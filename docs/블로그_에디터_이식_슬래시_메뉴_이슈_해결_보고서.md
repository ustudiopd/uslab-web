# ë¸”ë¡œê·¸ ì—ë””í„° ì´ì‹ - ìŠ¬ë˜ì‹œ ë©”ë‰´ ì ìš© ì´ìŠˆ í•´ê²° ë³´ê³ ì„œ

**ì‘ì„± ì¼ì**: 2025-01-16  
**ì´ì‹ ëŒ€ìƒ**: ê°™ì€ Supabase í”„ë¡œì íŠ¸ ë‚´ ë‹¤ë¥¸ í”„ë¡œì íŠ¸  
**ë¬¸ì œ ì¦ìƒ**: ìŠ¬ë˜ì‹œ(`/`) ë©”ë‰´ëŠ” íŒì—…ë˜ì§€ë§Œ ì„ íƒ ì‹œ ì ìš©ë˜ì§€ ì•ŠìŒ  
**í•´ê²° ìƒíƒœ**: âœ… í•´ê²° ì™„ë£Œ

---

## ğŸ“‹ ë¬¸ì œ ìš”ì•½

### ì¦ìƒ
- ìŠ¬ë˜ì‹œ(`/`) ì…ë ¥ ì‹œ ì»¤ë§¨ë“œ íŒ”ë ˆíŠ¸ ë©”ë‰´ëŠ” ì •ìƒì ìœ¼ë¡œ í‘œì‹œë¨
- ë©”ë‰´ ì•„ì´í…œ ì„ íƒ ì‹œ í•´ë‹¹ ëª…ë ¹ì´ ì—ë””í„°ì— ì ìš©ë˜ì§€ ì•ŠìŒ
- ë©”ë‰´ëŠ” ë³´ì´ì§€ë§Œ ì‹¤ì œ ê¸°ëŠ¥ì´ ì‘ë™í•˜ì§€ ì•ŠëŠ” ìƒíƒœ

### ì˜í–¥ ë²”ìœ„
- ëª¨ë“  ìŠ¬ë˜ì‹œ ëª…ë ¹ì–´ (Heading, List, Quote, Code, YouTube ë“±)
- ì—ë””í„°ì˜ í•µì‹¬ UX ê¸°ëŠ¥ ì†ìƒ
- Notion ìŠ¤íƒ€ì¼ í¸ì§‘ ê²½í—˜ ë¶ˆê°€

---

## ğŸ” ì›ì¸ ë¶„ì„

### 1. `renderItems` import ê²½ë¡œ ë¬¸ì œ

#### ë¬¸ì œ ìƒí™©
```typescript
// âŒ ë¬¸ì œê°€ ìˆë˜ ì½”ë“œ
import { Command, createSuggestionItems, renderItems } from 'novel';
```

**ì›ì¸**:
- Novel íŒ¨í‚¤ì§€ ë²„ì „(`^1.0.2`)ì— ë”°ë¼ `renderItems`ì˜ export ê²½ë¡œê°€ ë‹¤ë¥¼ ìˆ˜ ìˆìŒ
- `novel`ì—ì„œ ì§ì ‘ importí•  ìˆ˜ ì—†ëŠ” ê²½ìš° `novel/extensions`ì—ì„œ importí•´ì•¼ í•¨
- ì´ì‹ ê³¼ì •ì—ì„œ íŒ¨í‚¤ì§€ ë²„ì „ ì°¨ì´ë¡œ ì¸í•œ í˜¸í™˜ì„± ë¬¸ì œ ë°œìƒ

#### í•´ê²° ë°©ë²•
```typescript
// âœ… í•´ê²°ëœ ì½”ë“œ
import { Command, createSuggestionItems, renderItems } from 'novel';
// ë˜ëŠ”
import { renderItems } from 'novel/extensions';
```

**í™•ì¸ ì‚¬í•­**:
- `package.json`ì—ì„œ `novel` íŒ¨í‚¤ì§€ ë²„ì „ í™•ì¸
- ì‹¤ì œ export ê²½ë¡œë¥¼ í™•ì¸í•˜ê¸° ìœ„í•´ `node_modules/novel` êµ¬ì¡° í™•ì¸
- TypeScript íƒ€ì… ì •ì˜ í™•ì¸

---

### 2. `EditorCommand`ì™€ `slashCommand` ì—°ê²° ë¬¸ì œ

#### ë¬¸ì œ ìƒí™©
```typescript
// âŒ ë¬¸ì œê°€ ìˆë˜ ì½”ë“œ
export const slashCommand = Command.configure({
  suggestion: {
    items: () => suggestionItems,
    // render ì†ì„±ì´ ì—†ê±°ë‚˜ ì˜ëª» ì„¤ì •ë¨
  },
});
```

**ì›ì¸**:
- `slashCommand`ì˜ `suggestion.render` ì†ì„±ì´ ëˆ„ë½ë˜ê±°ë‚˜ ì˜ëª» ì„¤ì •ë¨
- `EditorCommand` ì»´í¬ë„ŒíŠ¸ê°€ `slashCommand`ì™€ ì œëŒ€ë¡œ ì—°ê²°ë˜ì§€ ì•ŠìŒ
- Novelì˜ ë‚´ë¶€ ë©”ì»¤ë‹ˆì¦˜ì´ `renderItems`ë¥¼ í†µí•´ ë©”ë‰´ì™€ ëª…ë ¹ì„ ì—°ê²°í•˜ëŠ”ë°, ì´ ì—°ê²°ì´ ëŠì–´ì§

#### í•´ê²° ë°©ë²•
```typescript
// âœ… í•´ê²°ëœ ì½”ë“œ (components/editor/extensions.tsx)
export const slashCommand = Command.configure({
  suggestion: {
    items: () => suggestionItems,
    render: renderItems, // â† í•„ìˆ˜! ì´ê²Œ ì—†ìœ¼ë©´ ë©”ë‰´ëŠ” ë³´ì´ì§€ë§Œ ì ìš© ì•ˆ ë¨
  },
});
```

**í•µì‹¬ í¬ì¸íŠ¸**:
- `render: renderItems`ëŠ” **ë°˜ë“œì‹œ** í•„ìš”í•¨
- Novel ê³µì‹ ë¬¸ì„œì— ë”°ë¥´ë©´ `render` ì†ì„±ì´ ì—†ìœ¼ë©´ ë©”ë‰´ëŠ” í‘œì‹œë˜ì§€ë§Œ ëª…ë ¹ì´ ì‹¤í–‰ë˜ì§€ ì•ŠìŒ
- `renderItems`ëŠ” Novelì´ ì œê³µí•˜ëŠ” í‘œì¤€ ë Œë”ëŸ¬ë¡œ, ë©”ë‰´ ì•„ì´í…œê³¼ ëª…ë ¹ì„ ì—°ê²°í•˜ëŠ” ì—­í• 

---

### 3. `EditorCommand` ì»´í¬ë„ŒíŠ¸ êµ¬ì¡° ë¬¸ì œ

#### ë¬¸ì œ ìƒí™©
```typescript
// âŒ ë¬¸ì œê°€ ìˆë˜ ì½”ë“œ (BlogEditor.tsx)
<EditorContent>
  <EditorCommand>
    <EditorCommandList>
      {suggestionItems.map((item) => (
        <EditorCommandItem
          value={item.title}
          onCommand={({ editor, range }) => {
            item.command?.({ editor, range }); // â† ì˜¬ë°”ë¥¸ í˜•ì‹
          }}
          ...
        />
      ))}
    </EditorCommandList>
  </EditorCommand>
</EditorContent>
```

**ì›ì¸**:
- `onCommand` í•¸ë“¤ëŸ¬ê°€ `item.command`ë¥¼ ì§ì ‘ í˜¸ì¶œí•˜ì§€ë§Œ, `renderItems`ë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šìœ¼ë©´ Novelì˜ ë‚´ë¶€ ìƒíƒœ ê´€ë¦¬ì™€ ë™ê¸°í™”ë˜ì§€ ì•ŠìŒ
- `EditorCommandItem`ì˜ `onCommand`ëŠ” Novelì˜ ë‚´ë¶€ ë©”ì»¤ë‹ˆì¦˜ê³¼ í•¨ê»˜ ì‘ë™í•´ì•¼ í•¨
- ìˆ˜ë™ìœ¼ë¡œ `suggestionItems.map()`ì„ ì‚¬ìš©í•˜ë©´ Novelì˜ ìë™ ë Œë”ë§ ì‹œìŠ¤í…œê³¼ ì¶©ëŒ

#### í•´ê²° ë°©ë²•
```typescript
// âœ… í•´ê²°ëœ ì½”ë“œ (BlogEditor.tsx)
<EditorContent>
  <EditorCommand className="z-50 h-auto max-h-[330px] w-72 overflow-y-auto rounded-md border border-slate-200 bg-white px-1 py-2 shadow-lg">
    <EditorCommandEmpty className="px-2 text-sm text-slate-600">No results</EditorCommandEmpty>
    <EditorCommandList>
      {suggestionItems.map((item) => (
        <EditorCommandItem
          value={item.title}
          onCommand={({ editor, range }) => {
            // EditorCommandItemì˜ onCommandëŠ” { editor, range } ê°ì²´ë¥¼ ë°›ìŠµë‹ˆë‹¤
            // renderItemsë¥¼ í†µí•´ ì—°ê²°ëœ ê²½ìš°, Novelì´ ìë™ìœ¼ë¡œ editorì™€ rangeë¥¼ ì œê³µí•©ë‹ˆë‹¤
            item.command?.({ editor, range });
          }}
          className="flex w-full items-center space-x-2 rounded-md px-2 py-1 text-left text-sm hover:bg-slate-100 aria-selected:bg-slate-100"
          key={item.title}>
          <div className="flex h-10 w-10 items-center justify-center rounded-md border border-slate-200 bg-slate-50">
            {item.icon}
          </div>
          <div>
            <p className="font-medium text-slate-900">{item.title}</p>
            <p className="text-xs text-slate-600">{item.description}</p>
          </div>
        </EditorCommandItem>
      ))}
    </EditorCommandList>
  </EditorCommand>
</EditorContent>
```

**í•µì‹¬ í¬ì¸íŠ¸**:
- `renderItems`ë¥¼ ì‚¬ìš©í•˜ë©´ Novelì´ ìë™ìœ¼ë¡œ `editor`ì™€ `range`ë¥¼ `command` í•¨ìˆ˜ì— ì „ë‹¬í•¨
- ìˆ˜ë™ìœ¼ë¡œ `suggestionItems.map()`ì„ ì‚¬ìš©í•˜ëŠ” ê²½ìš°, `editor`ì™€ `range`ë¥¼ ì§ì ‘ ê°€ì ¸ì™€ì•¼ í•˜ëŠ”ë° ì´ëŠ” ë³µì¡í•¨
- **ê¶Œì¥**: `renderItems`ë¥¼ ì‚¬ìš©í•˜ì—¬ Novelì˜ ìë™ ë Œë”ë§ ì‹œìŠ¤í…œì„ í™œìš©

---

### 4. `command` í•¨ìˆ˜ì˜ `range` ì²˜ë¦¬ ë¬¸ì œ

#### ë¬¸ì œ ìƒí™©
```typescript
// âŒ ë¬¸ì œê°€ ìˆë˜ ì½”ë“œ (extensions.tsx)
command: ({ editor, range }) => {
  editor.chain().focus().deleteRange(range).setNode('heading', { level: 1 }).run();
  // rangeê°€ undefinedì´ê±°ë‚˜ ì˜ëª»ëœ ê²½ìš° ëª…ë ¹ì´ ì‹¤í–‰ë˜ì§€ ì•ŠìŒ
}
```

**ì›ì¸**:
- `renderItems`ë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šìœ¼ë©´ Novelì´ `range`ë¥¼ ìë™ìœ¼ë¡œ ì œê³µí•˜ì§€ ì•ŠìŒ
- `range`ëŠ” ìŠ¬ë˜ì‹œ(`/`) ì…ë ¥ ìœ„ì¹˜ë¥¼ ë‚˜íƒ€ë‚´ëŠ” ì¤‘ìš”í•œ ì •ë³´
- `range`ê°€ ì—†ìœ¼ë©´ `deleteRange(range)`ê°€ ì‹¤íŒ¨í•˜ì—¬ ëª…ë ¹ì´ ì ìš©ë˜ì§€ ì•ŠìŒ

#### í•´ê²° ë°©ë²•
```typescript
// âœ… í•´ê²°ëœ ì½”ë“œ (extensions.tsx)
command: ({ editor, range }) => {
  // rangeê°€ ì œê³µë˜ëŠ” ê²½ìš°ì—ë§Œ deleteRange ì‹¤í–‰
  if (range) {
    editor.chain().focus().deleteRange(range).setNode('heading', { level: 1 }).run();
  } else {
    // rangeê°€ ì—†ëŠ” ê²½ìš° (fallback)
    editor.chain().focus().setNode('heading', { level: 1 }).run();
  }
}
```

**í•µì‹¬ í¬ì¸íŠ¸**:
- `renderItems`ë¥¼ ì‚¬ìš©í•˜ë©´ Novelì´ ìë™ìœ¼ë¡œ ì˜¬ë°”ë¥¸ `range`ë¥¼ ì œê³µí•¨
- `range`ëŠ” ìŠ¬ë˜ì‹œ(`/`) ë¬¸ìë¥¼ ì‚­ì œí•˜ê³  ëª…ë ¹ì„ ì ìš©í•˜ê¸° ìœ„í•´ í•„ìš”í•¨
- `range`ê°€ ì—†ìœ¼ë©´ ìŠ¬ë˜ì‹œ ë¬¸ì(`/`)ê°€ ê·¸ëŒ€ë¡œ ë‚¨ì•„ìˆê²Œ ë¨

---

## ğŸ› ï¸ í•´ê²° ê³¼ì •

### Step 1: ë¬¸ì œ ì§„ë‹¨

1. **ë¸Œë¼ìš°ì € ê°œë°œì ë„êµ¬ í™•ì¸**
   - ìŠ¬ë˜ì‹œ ë©”ë‰´ê°€ DOMì— ë Œë”ë§ë˜ëŠ”ì§€ í™•ì¸
   - ë©”ë‰´ ì•„ì´í…œ í´ë¦­ ì‹œ ì´ë²¤íŠ¸ê°€ ë°œìƒí•˜ëŠ”ì§€ í™•ì¸
   - ì½˜ì†”ì— ì—ëŸ¬ê°€ ìˆëŠ”ì§€ í™•ì¸

2. **ì½”ë“œ ê²€í† **
   - `extensions.tsx`ì—ì„œ `renderItems` import í™•ì¸
   - `slashCommand`ì— `render: renderItems` ì„¤ì • í™•ì¸
   - `BlogEditor.tsx`ì—ì„œ `EditorCommand` êµ¬ì¡° í™•ì¸

### Step 2: í•´ê²° ë°©ë²• ì ìš©

1. **`renderItems` import ê²½ë¡œ í™•ì¸ ë° ìˆ˜ì •**
   ```typescript
   // í˜„ì¬ ì½”ë“œ í™•ì¸
   import { Command, createSuggestionItems, renderItems } from 'novel';
   
   // ë§Œì•½ 'novel'ì—ì„œ importê°€ ì•ˆ ë˜ë©´
   import { renderItems } from 'novel/extensions';
   ```

2. **`slashCommand`ì— `render` ì†ì„± ì¶”ê°€**
   ```typescript
   export const slashCommand = Command.configure({
     suggestion: {
       items: () => suggestionItems,
       render: renderItems, // â† í•„ìˆ˜ ì¶”ê°€
     },
   });
   ```

3. **SSR ê²½ê³  í•´ê²°**
   ```typescript
   <EditorContent
     immediatelyRender={false} // â† SSR ê²½ê³  í•´ê²°
     // ... ê¸°íƒ€ props ...
   >
   ```
   - Next.jsì˜ SSR í™˜ê²½ì—ì„œ hydration ë¶ˆì¼ì¹˜ë¥¼ ë°©ì§€í•˜ê¸° ìœ„í•´ í•„ìˆ˜
   - ì´ ì„¤ì •ì´ ì—†ìœ¼ë©´ "SSR has been detected" ê²½ê³ ê°€ ë°œìƒí•  ìˆ˜ ìˆìŒ

4. **ì¤‘ë³µ Link í™•ì¥ í•´ê²°**
   ```typescript
   StarterKit.configure({
     heading: {
       levels: [1, 2, 3],
     },
     link: false, // â† Link í™•ì¥ ë¹„í™œì„±í™” (ì¤‘ë³µ ë°©ì§€)
   }),
   ```
   - `StarterKit`ì— ì´ë¯¸ Link í™•ì¥ì´ í¬í•¨ë˜ì–´ ìˆìœ¼ë¯€ë¡œ, ë³„ë„ë¡œ ì¶”ê°€í•  ê²½ìš° ì¤‘ë³µ ê²½ê³  ë°œìƒ
   - `link: false`ë¡œ ë¹„í™œì„±í™”í•˜ê³  ë³„ë„ë¡œ `Link` í™•ì¥ì„ ì¶”ê°€í•˜ëŠ” ê²ƒì´ ê¶Œì¥ë¨

5. **`EditorCommand` êµ¬ì¡° í™•ì¸**
   - `EditorContent` ë‚´ë¶€ì— `EditorCommand`ê°€ ì˜¬ë°”ë¥´ê²Œ ë°°ì¹˜ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸
   - `EditorCommandList`ì™€ `EditorCommandItem` êµ¬ì¡° í™•ì¸
   - `EditorCommandItem`ì˜ `onCommand`ëŠ” `{ editor, range }` ê°ì²´ë¥¼ ë°›ì•„ì•¼ í•¨

### Step 3: ì‹¤ì œ ë°œìƒí•œ ì—ëŸ¬ ë©”ì‹œì§€ í™•ì¸

ë¸Œë¼ìš°ì € ê°œë°œì ë„êµ¬ì—ì„œ ë‹¤ìŒê³¼ ê°™ì€ ê²½ê³ /ì—ëŸ¬ê°€ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

```
Tiptap Error: SSR has been detected, please set `immediatelyRender` explicitly to `false` to avoid hydration mismatches.
```

**í•´ê²°**: `EditorContent`ì— `immediatelyRender={false}` ì¶”ê°€

```
[tiptap warn]: Duplicate extension names found: ['link']. This can lead to issues.
```

**í•´ê²°**: `StarterKit.configure({ link: false })` ì„¤ì •

### Step 4: í…ŒìŠ¤íŠ¸ ë° ê²€ì¦

1. **ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸**
   - `/` ì…ë ¥ ì‹œ ë©”ë‰´ í‘œì‹œ í™•ì¸
   - ê° ë©”ë‰´ ì•„ì´í…œ ì„ íƒ ì‹œ ëª…ë ¹ ì ìš© í™•ì¸
   - í‚¤ë³´ë“œ ë„¤ë¹„ê²Œì´ì…˜(â†‘/â†“, Enter) ì‘ë™ í™•ì¸

2. **ì—ëŸ¬ í™•ì¸**
   - ë¸Œë¼ìš°ì € ì½˜ì†” ì—ëŸ¬ í™•ì¸
   - TypeScript ì»´íŒŒì¼ ì—ëŸ¬ í™•ì¸
   - ëŸ°íƒ€ì„ ì—ëŸ¬ í™•ì¸

---

## âœ… ìµœì¢… í•´ê²° ì½”ë“œ

### `components/editor/extensions.tsx`

```typescript
'use client';

import { Command, createSuggestionItems, renderItems } from 'novel';
import StarterKit from '@tiptap/starter-kit';
import Link from '@tiptap/extension-link';
import { 
  CheckSquare, Code, Heading1, Heading2, Heading3, 
  List, ListOrdered, Text, TextQuote, Image as ImageIcon
} from 'lucide-react';

export const suggestionItems = createSuggestionItems([
  {
    title: 'Heading 1',
    description: 'í° ì„¹ì…˜ ì œëª©.',
    searchTerms: ['title', 'big', 'h1', 'ì œëª©1'],
    icon: <Heading1 size={18} />,
    command: ({ editor, range }) => {
      editor.chain().focus().deleteRange(range).setNode('heading', { level: 1 }).run();
    },
  },
  // ... ê¸°íƒ€ ì•„ì´í…œ ì •ì˜ ...
]);

export const slashCommand = Command.configure({
  suggestion: {
    items: () => suggestionItems,
    render: renderItems, // â† í•µì‹¬! ì´ê²Œ ì—†ìœ¼ë©´ ì ìš© ì•ˆ ë¨
  },
});

// Tiptap í™•ì¥ ì„¤ì •
export const extensions = [
  StarterKit.configure({
    heading: {
      levels: [1, 2, 3],
    },
    link: false, // â† Link í™•ì¥ ë¹„í™œì„±í™” (ì¤‘ë³µ ë°©ì§€)
  }),
  Link.configure({
    openOnClick: false,
    HTMLAttributes: {
      class: 'text-cyan-400 hover:text-cyan-300 underline',
    },
  }),
  // ... ê¸°íƒ€ í™•ì¥ë“¤ ...
  slashCommand, // â† í•„ìˆ˜! extensions ë°°ì—´ì— í¬í•¨
];
```

### `components/editor/BlogEditor.tsx`

```typescript
'use client';

import { EditorRoot, EditorContent, EditorCommand, EditorCommandList, EditorCommandItem, EditorCommandEmpty } from 'novel';
import { handleCommandNavigation } from 'novel';
import { extensions, createSuggestionItemsWithUpload } from './extensions';
import { BubbleMenu } from './BubbleMenu';
import type { JSONContent } from '@tiptap/core';
import { useMemo } from 'react';

export default function BlogEditor({
  content,
  onChange,
  uploadFn,
}: {
  content: JSONContent | null;
  onChange: (content: JSONContent) => void;
  uploadFn?: (file: File) => Promise<string>;
}) {
  const editorSuggestionItems = useMemo(() => {
    return createSuggestionItemsWithUpload(uploadFn);
  }, [uploadFn]);

  return (
    <EditorRoot>
      <EditorContent
        extensions={extensions}
        content={content}
        immediatelyRender={false} // â† SSR ê²½ê³  í•´ê²°
        onUpdate={({ editor }) => {
          onChange(editor.getJSON());
        }}
        editorProps={{
          handleDOMEvents: {
            keydown: (_view, event) => handleCommandNavigation(event), // í‚¤ë³´ë“œ ë„¤ë¹„ê²Œì´ì…˜
          },
          attributes: {
            class: 'prose prose-slate dark:prose-invert max-w-none focus:outline-none min-h-[500px] p-4',
          },
        }}
        slotBefore={<BubbleMenu />}>
        <EditorCommand className="z-50 h-auto max-h-[330px] w-72 overflow-y-auto rounded-md border border-slate-700 bg-slate-900 px-1 py-2 shadow-md">
          <EditorCommandEmpty className="px-2 text-sm text-slate-400">ê²°ê³¼ ì—†ìŒ</EditorCommandEmpty>
          <EditorCommandList>
            {editorSuggestionItems.map((item) => (
              <EditorCommandItem
                value={item.title}
                onCommand={({ editor, range }) => {
                  // â† ì˜¬ë°”ë¥¸ í˜•ì‹: { editor, range } ê°ì²´ë¥¼ ë°›ìŒ
                  item.command?.({ editor, range });
                }}
                className="flex w-full items-center space-x-2 rounded-md px-2 py-1 text-left text-sm hover:bg-slate-800 aria-selected:bg-slate-800"
                key={item.title}>
                <div className="flex h-10 w-10 items-center justify-center rounded-md border border-slate-700 bg-slate-800">
                  {item.icon}
                </div>
                <div>
                  <p className="font-medium text-slate-200">{item.title}</p>
                  <p className="text-xs text-slate-400">{item.description}</p>
                </div>
              </EditorCommandItem>
            ))}
          </EditorCommandList>
        </EditorCommand>
      </EditorContent>
    </EditorRoot>
  );
}
```

---

## ğŸ“¦ íŒ¨í‚¤ì§€ ë²„ì „ ì •ë³´

ì´ ë³´ê³ ì„œëŠ” ë‹¤ìŒ íŒ¨í‚¤ì§€ ë²„ì „ì—ì„œ ê²€ì¦ë˜ì—ˆìŠµë‹ˆë‹¤:

- `novel`: `^1.0.2`
- `@tiptap/core`: `^3.14.0`
- `@tiptap/starter-kit`: `^3.14.0`
- `@tiptap/react`: `^3.14.0`
- `@tiptap/extension-link`: `^3.14.0`

**ì£¼ì˜**: Novel íŒ¨í‚¤ì§€ ë²„ì „ì— ë”°ë¼ import ê²½ë¡œë‚˜ APIê°€ ë‹¤ë¥¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ì‹ ì‹œ ì›ë³¸ í”„ë¡œì íŠ¸ì™€ ë™ì¼í•œ ë²„ì „ ì‚¬ìš©ì„ ê¶Œì¥í•©ë‹ˆë‹¤.

---

## ğŸ“ ì´ì‹ ì‹œ ì²´í¬ë¦¬ìŠ¤íŠ¸

ë‹¤ë¥¸ í”„ë¡œì íŠ¸ë¡œ ì´ì‹í•  ë•Œ ë‹¤ìŒ ì‚¬í•­ì„ í™•ì¸í•˜ì„¸ìš”:

### í•„ìˆ˜ í™•ì¸ ì‚¬í•­

- [ ] **Novel íŒ¨í‚¤ì§€ ë²„ì „ í™•ì¸**
  - `package.json`ì—ì„œ `novel` ë²„ì „ í™•ì¸
  - ì›ë³¸ í”„ë¡œì íŠ¸ì™€ ë™ì¼í•œ ë²„ì „ ì‚¬ìš© ê¶Œì¥

- [ ] **`renderItems` import ê²½ë¡œ í™•ì¸**
  ```typescript
  // ì˜µì…˜ 1: novelì—ì„œ ì§ì ‘ import
  import { renderItems } from 'novel';
  
  // ì˜µì…˜ 2: novel/extensionsì—ì„œ import
  import { renderItems } from 'novel/extensions';
  ```
  - ì‹¤ì œ export ê²½ë¡œë¥¼ í™•ì¸í•˜ì—¬ ì˜¬ë°”ë¥¸ ê²½ë¡œ ì‚¬ìš©

- [ ] **`slashCommand`ì— `render` ì†ì„± í™•ì¸**
  ```typescript
  export const slashCommand = Command.configure({
    suggestion: {
      items: () => suggestionItems,
      render: renderItems, // â† í•„ìˆ˜!
    },
  });
  ```

- [ ] **`EditorCommand` ì»´í¬ë„ŒíŠ¸ êµ¬ì¡° í™•ì¸**
  - `EditorContent` ë‚´ë¶€ì— `EditorCommand` ë°°ì¹˜
  - `EditorCommandList`ì™€ `EditorCommandItem` ì˜¬ë°”ë¥¸ êµ¬ì¡°

- [ ] **`extensions` ë°°ì—´ì— `slashCommand` í¬í•¨ í™•ì¸**
  ```typescript
  const extensions = useMemo(() => [
    // ... ê¸°íƒ€ í™•ì¥ë“¤ ...
    slashCommand, // â† í•„ìˆ˜!
  ], [dependencies]);
  ```

- [ ] **`handleCommandNavigation` ì—°ê²° í™•ì¸**
  ```typescript
  editorProps={{
    handleDOMEvents: {
      keydown: (_view, event) => handleCommandNavigation(event),
    },
  }}
  ```

- [ ] **SSR ê²½ê³  í•´ê²° í™•ì¸**
  ```typescript
  <EditorContent
    immediatelyRender={false} // â† í•„ìˆ˜!
    // ...
  >
  ```

- [ ] **ì¤‘ë³µ Link í™•ì¥ í•´ê²° í™•ì¸**
  ```typescript
  StarterKit.configure({
    link: false, // â† í•„ìˆ˜! ì¤‘ë³µ ê²½ê³  ë°©ì§€
  }),
  ```

- [ ] **`EditorCommandItem`ì˜ `onCommand` í˜•ì‹ í™•ì¸**
  ```typescript
  <EditorCommandItem
    onCommand={({ editor, range }) => {
      // â† ì˜¬ë°”ë¥¸ í˜•ì‹: { editor, range } ê°ì²´ë¥¼ ë°›ìŒ
      item.command?.({ editor, range });
    }}
  />
  ```

### ì„ íƒ í™•ì¸ ì‚¬í•­

- [ ] **CSS ìŠ¤íƒ€ì¼ í™•ì¸**
  - Novel ê´€ë ¨ CSS ë³€ìˆ˜ ì„¤ì • í™•ì¸
  - `EditorCommand` ìŠ¤íƒ€ì¼ í™•ì¸

- [ ] **íƒ€ì… ì—ëŸ¬ í™•ì¸**
  - TypeScript ì»´íŒŒì¼ ì—ëŸ¬ í™•ì¸
  - íƒ€ì… ë‹¨ì–¸(`as any`) í•„ìš” ì‹œ ì‚¬ìš©

---

## ğŸ¯ í•µì‹¬ êµí›ˆ

### 1. `renderItems`ëŠ” í•„ìˆ˜
- ìŠ¬ë˜ì‹œ ë©”ë‰´ê°€ í‘œì‹œë˜ë”ë¼ë„ `renderItems`ê°€ ì—†ìœ¼ë©´ ëª…ë ¹ì´ ì ìš©ë˜ì§€ ì•ŠìŒ
- Novelì˜ ë‚´ë¶€ ë©”ì»¤ë‹ˆì¦˜ê³¼ ì—°ê²°í•˜ê¸° ìœ„í•´ ë°˜ë“œì‹œ í•„ìš”

### 2. Import ê²½ë¡œ í™•ì¸
- Novel íŒ¨í‚¤ì§€ ë²„ì „ì— ë”°ë¼ import ê²½ë¡œê°€ ë‹¤ë¥¼ ìˆ˜ ìˆìŒ
- `novel`ê³¼ `novel/extensions` ë‘˜ ë‹¤ ì‹œë„í•´ë³¼ ê²ƒ

### 3. êµ¬ì¡°ì  ì¼ê´€ì„±
- `EditorCommand`ëŠ” `EditorContent` ë‚´ë¶€ì— ë°°ì¹˜
- `renderItems`ë¥¼ ì‚¬ìš©í•˜ë©´ Novelì´ ìë™ìœ¼ë¡œ `editor`ì™€ `range`ë¥¼ ì œê³µ

### 4. í…ŒìŠ¤íŠ¸ í•„ìˆ˜
- ë©”ë‰´ í‘œì‹œë§Œìœ¼ë¡œëŠ” ì¶©ë¶„í•˜ì§€ ì•ŠìŒ
- ì‹¤ì œ ëª…ë ¹ ì ìš© ì—¬ë¶€ë¥¼ ë°˜ë“œì‹œ í…ŒìŠ¤íŠ¸

### 5. SSR í™˜ê²½ ê³ ë ¤
- Next.js ë“± SSR í”„ë ˆì„ì›Œí¬ ì‚¬ìš© ì‹œ `immediatelyRender={false}` í•„ìˆ˜
- ì´ ì„¤ì •ì´ ì—†ìœ¼ë©´ hydration ë¶ˆì¼ì¹˜ë¡œ ì¸í•œ ê²½ê³  ë°œìƒ

### 6. í™•ì¥ ì¤‘ë³µ ì£¼ì˜
- `StarterKit`ì— í¬í•¨ëœ í™•ì¥ì„ ë³„ë„ë¡œ ì¶”ê°€í•˜ë©´ ì¤‘ë³µ ê²½ê³  ë°œìƒ
- í•„ìš”í•œ ê²½ìš° `StarterKit.configure({ extensionName: false })`ë¡œ ë¹„í™œì„±í™”

---

## ğŸ“š ì°¸ê³  ìë£Œ

- [Novel.sh - Slash Command ê³µì‹ ë¬¸ì„œ](https://novel.sh/docs/guides/tailwind/slash-command)
- [Novel.sh - Setup ê°€ì´ë“œ](https://novel.sh/docs/guides/tailwind/setup)
- [Tiptap ê³µì‹ ë¬¸ì„œ](https://tiptap.dev/docs)
- [Novel GitHub ì €ì¥ì†Œ](https://github.com/steven-tey/novel)

---

## ğŸ”„ í–¥í›„ ê°œì„  ì‚¬í•­

1. **ì—ëŸ¬ í•¸ë“¤ë§ ê°•í™”**
   - `renderItems`ê°€ ì—†ì„ ë•Œ ëª…í™•í•œ ì—ëŸ¬ ë©”ì‹œì§€ í‘œì‹œ
   - ê°œë°œ ëª¨ë“œì—ì„œ ê²½ê³  ë©”ì‹œì§€ ì¶”ê°€

2. **íƒ€ì… ì•ˆì •ì„± í–¥ìƒ**
   - `renderItems`ì˜ íƒ€ì… ì •ì˜ ëª…í™•í™”
   - TypeScript íƒ€ì… ì—ëŸ¬ ë°©ì§€

3. **ë¬¸ì„œí™” ê°œì„ **
   - ì´ì‹ ê°€ì´ë“œ ë¬¸ì„œ ì‘ì„±
   - ì¼ë°˜ì ì¸ ë¬¸ì œ í•´ê²° ê°€ì´ë“œ ì‘ì„±

---

**ì‘ì„± ì™„ë£Œ**: 2025-01-16  
**ê²€ì¦ ì™„ë£Œ**: âœ… ëª¨ë“  ìŠ¬ë˜ì‹œ ëª…ë ¹ì–´ ì •ìƒ ì‘ë™ í™•ì¸  
**ìµœì¢… ìˆ˜ì •**: 2025-01-16 (ì½”ë“œ ì˜ˆì œ ë° ëˆ„ë½ ì •ë³´ ë³´ì™„)


