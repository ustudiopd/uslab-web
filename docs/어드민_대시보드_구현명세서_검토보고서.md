# ì–´ë“œë¯¼ ëŒ€ì‹œë³´ë“œ êµ¬í˜„ëª…ì„¸ì„œ ê²€í†  ë³´ê³ ì„œ

**ê²€í†  ì¼ì**: 2025-01-15  
**ëª…ì„¸ì„œ ë²„ì „**: v1.0 (MVP â†’ í™•ì¥í˜•)  
**ê²€í† ì**: AI Assistant

---

## âœ… ì „ì²´ í‰ê°€

**ì¢…í•© ì ìˆ˜**: 9/10

ëª…ì„¸ì„œëŠ” **í˜„ì‹¤ì ì´ê³  ì‹¤ìš©ì ì¸ MVP ì ‘ê·¼**ì„ ì˜ ë°˜ì˜í•˜ê³  ìˆìœ¼ë©°, íŠ¹íˆ ë‹¤ìŒ ê°•ì ì´ ìˆìŠµë‹ˆë‹¤:

1. âœ… **ì œì•½ì‚¬í•­ ëª…í™•íˆ ì¸ì‹**: ê³µìœ  Supabase í”„ë¡œì íŠ¸, Vercel ë¹„ìš©, 1ì¸ ê°œë°œ í™˜ê²½
2. âœ… **ë‹¨ê³„ì  êµ¬í˜„ ì „ëµ**: Step 1 Lite MVP â†’ í™•ì¥í˜•ìœ¼ë¡œ ì ì§„ì  ë°œì „
3. âœ… **ìš´ì˜ ê³ ë ¤ì‚¬í•­**: Bot í•„í„°ë§, Retention ì •ì±…, sendBeacon ì„±ëŠ¥ ìµœì í™”
4. âœ… **êµ¬ì²´ì ì¸ ê¸°ìˆ  ìŠ¤í™**: DB ìŠ¤í‚¤ë§ˆ, API ì„¤ê³„, ì¿¼ë¦¬ ì˜ˆì‹œê¹Œì§€ í¬í•¨

---

## ğŸ” ìƒì„¸ ê²€í†  í•­ëª©

### 1. ê¸°ìˆ  ìŠ¤íƒ ë° ì œì•½ì‚¬í•­ âœ…

#### âœ… ì˜ ëœ ì 
- Next.js 14 App Router ëª…ì‹œ
- Supabase ê³µìœ  í”„ë¡œì íŠ¸ êµ¬ì¡° ì •í™•íˆ ë°˜ì˜
- `uslab_` prefix ì „ëµ ì¼ê´€ì„± ìœ ì§€
- Vercel Pro í™˜ê²½ ê³ ë ¤

#### âš ï¸ ë³´ì™„ ì œì•ˆ
- **React ë²„ì „**: ëª…ì„¸ì„œì—ëŠ” ì—†ì§€ë§Œ, ì‹¤ì œ í”„ë¡œì íŠ¸ëŠ” React 19 ì‚¬ìš© ì¤‘
  - ì¶”ì²œ: "React 19" ëª…ì‹œ ì¶”ê°€
- **TypeScript**: ëª…ì‹œë˜ì–´ ìˆìœ¼ë‚˜ ë²„ì „ ì •ë³´ ì—†ìŒ
  - ì¶”ì²œ: "TypeScript 5.x" ì¶”ê°€

---

### 2. ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ ì„¤ê³„ âœ…

#### âœ… ì˜ ëœ ì 
- `uslab_sessions`ì™€ `uslab_page_views` ë¶„ë¦¬ ì„¤ê³„ ì ì ˆ
- FK cascade ì „ëµ (`on delete cascade`) ì ì ˆ
- ì¸ë±ìŠ¤ ì „ëµ ëª…í™• (created_at, page_path, session_id ë“±)
- RLS ì •ì±…ìœ¼ë¡œ ë³´ì•ˆ ê³ ë ¤

#### âš ï¸ ë³´ì™„ ì œì•ˆ

**2.1 ì„¸ì…˜ í‚¤ ìœ ë‹ˆí¬ ì œì•½**
```sql
-- í˜„ì¬: session_key text not null unique
-- ì œì•ˆ: ëª…ì‹œì  UNIQUE ì œì•½ì¡°ê±´ ì¶”ê°€
create unique index if not exists uslab_idx_sessions_session_key 
  on uslab_sessions (session_key);
```
ì´ìœ : `unique` í‚¤ì›Œë“œë§Œìœ¼ë¡œëŠ” ì¸ë±ìŠ¤ê°€ ìë™ ìƒì„±ë˜ì§€ ì•Šì„ ìˆ˜ ìˆìŒ

**2.2 ì„¸ì…˜ ë§Œë£Œ ì‹œê°„ ì»¬ëŸ¼**
```sql
-- ì œì•ˆ: ì„¸ì…˜ ë§Œë£Œ ì‹œê°„ ëª…ì‹œì  ê´€ë¦¬
session_expires_at timestamptz,  -- 30ë¶„ í›„ ë§Œë£Œ
```
ì´ìœ : í´ë¼ì´ì–¸íŠ¸ì—ì„œ 30ë¶„ ê¸°ì¤€ìœ¼ë¡œ ìƒˆ ì„¸ì…˜ ìƒì„±í•˜ì§€ë§Œ, DBì—ì„œë„ ëª…ì‹œì  ê´€ë¦¬ ê°€ëŠ¥

**2.3 í˜ì´ì§€ë·°ì— about_id ì¶”ê°€**
```sql
-- í˜„ì¬: post_idë§Œ ìˆìŒ
-- ì œì•ˆ: about_idë„ ì¶”ê°€
about_id uuid references uslab_about(id) on delete set null,
```
ì´ìœ : ì†Œê°œ í˜ì´ì§€(`/about`)ë„ ì¡°íšŒìˆ˜ ì¶”ì  ì¤‘ì´ë¯€ë¡œ, about í˜ì´ì§€ë·°ë„ ë§¤í•‘ ê°€ëŠ¥

**2.4 íƒ€ì„ì¡´ ì¸ë±ìŠ¤ ìµœì í™”**
```sql
-- ì œì•ˆ: Asia/Seoul ê¸°ì¤€ ë‚ ì§œ ì§‘ê³„ë¥¼ ìœ„í•œ í•¨ìˆ˜ ì¸ë±ìŠ¤ ê³ ë ¤
create index if not exists uslab_idx_page_views_created_at_kst_day 
  on uslab_page_views (date_trunc('day', created_at at time zone 'Asia/Seoul'));
```
ì´ìœ : ì¼ë³„ ì§‘ê³„ ì¿¼ë¦¬ ì„±ëŠ¥ í–¥ìƒ (ì„ íƒì‚¬í•­)

---

### 3. Bot í•„í„°ë§ ì „ëµ âœ…

#### âœ… ì˜ ëœ ì 
- UA ê¸°ë°˜ í•„í„°ë§ ëª…í™•
- ì£¼ìš” ë´‡ íŒ¨í„´ ë¦¬ìŠ¤íŠ¸ ì œê³µ
- "ì™„ë²½í•  í•„ìš” ì—†ìŒ" í˜„ì‹¤ì  ì ‘ê·¼

#### âš ï¸ ë³´ì™„ ì œì•ˆ

**3.1 IP ê¸°ë°˜ ì¶”ê°€ í•„í„°ë§ (ì„ íƒ)**
```typescript
// ì œì•ˆ: Vercelì—ì„œ ì œê³µí•˜ëŠ” IP ê¸°ë°˜ ë´‡ ê°ì§€
const isBot = 
  userAgent.includes('bot') || 
  userAgent.includes('crawler') ||
  (req.headers.get('x-vercel-ip-country') === null && userAgent === '');
```
ì´ìœ : ì¼ë¶€ ë´‡ì€ UAë¥¼ ìœ„ì¡°í•˜ì§€ë§Œ IP íŒ¨í„´ìœ¼ë¡œ ê°ì§€ ê°€ëŠ¥

**3.2 Rate Limiting ì¶”ê°€**
```typescript
// ì œì•ˆ: ë™ì¼ IPì—ì„œ ì´ˆë‹¹ NíšŒ ì´ìƒ ìš”ì²­ ì‹œ ì°¨ë‹¨
// (Vercel Edge Config ë˜ëŠ” Redis í™œìš©)
```
ì´ìœ : ë´‡ í•„í„°ë§ ìš°íšŒ ì‹œë‚˜ë¦¬ì˜¤ ëŒ€ë¹„

---

### 4. API ì„¤ê³„ (/api/track) âœ…

#### âœ… ì˜ ëœ ì 
- Service role insert íŒ¨í„´ (ë³´ì•ˆ)
- 204 ì‘ë‹µìœ¼ë¡œ UX ì˜í–¥ ìµœì†Œí™”
- Payload validation (zod) ëª…ì‹œ
- ì—ëŸ¬ ì²˜ë¦¬ ì „ëµ ëª…í™•

#### âš ï¸ ë³´ì™„ ì œì•ˆ

**4.1 Request Payload ê²€ì¦ ìŠ¤í‚¤ë§ˆ**
```typescript
// ì œì•ˆ: ëª…ì„¸ì„œì— zod ìŠ¤í‚¤ë§ˆ ì˜ˆì‹œ ì¶”ê°€
const trackSchema = z.object({
  session_key: z.string().max(128),
  page_path: z.string().max(2048).regex(/^\/[a-z0-9\/-]*$/i),
  post_id: z.string().uuid().nullable(),
  locale: z.enum(['ko', 'en']).nullable(),
  referrer: z.string().max(2048).url().nullable(),
  utm: z.object({
    source: z.string().max(100).nullable(),
    medium: z.string().max(100).nullable(),
    campaign: z.string().max(100).nullable(),
    term: z.string().max(100).nullable(),
    content: z.string().max(100).nullable(),
  }).nullable(),
});
```

**4.2 referrer_host íŒŒì‹± ë¡œì§ ëª…ì‹œ**
```typescript
// ì œì•ˆ: ëª…ì„¸ì„œì— íŒŒì‹± ë¡œì§ ì˜ˆì‹œ ì¶”ê°€
function parseReferrerHost(referrer: string | null): string | null {
  if (!referrer) return null;
  try {
    const url = new URL(referrer);
    return url.hostname.replace(/^www\./, ''); // www ì œê±°
  } catch {
    return null;
  }
}
```

**4.3 device_type íŒŒì‹± ë¡œì§ ëª…ì‹œ**
```typescript
// ì œì•ˆ: ëª…ì„¸ì„œì— íŒŒì‹± ë¡œì§ ì˜ˆì‹œ ì¶”ê°€
function parseDeviceType(userAgent: string): 'mobile' | 'tablet' | 'desktop' | 'unknown' {
  const ua = userAgent.toLowerCase();
  if (/mobile|android|iphone|ipod/.test(ua)) return 'mobile';
  if (/tablet|ipad/.test(ua)) return 'tablet';
  if (/desktop|windows|macintosh|linux/.test(ua)) return 'desktop';
  return 'unknown';
}
```

---

### 5. í´ë¼ì´ì–¸íŠ¸ íŠ¸ë˜í‚¹ ì»´í¬ë„ŒíŠ¸ âœ…

#### âœ… ì˜ ëœ ì 
- sendBeacon ìš°ì„  ì‚¬ìš© (ì„±ëŠ¥)
- keepalive fallback ì „ëµ
- ì„¸ì…˜ í‚¤ ìƒì„± ê·œì¹™ ëª…í™•
- Public ì˜ì—­ë§Œ íŠ¸ë˜í‚¹ (ë³´ì•ˆ)

#### âš ï¸ ë³´ì™„ ì œì•ˆ

**5.1 Next.js App Router ë¼ìš°íŒ… ê°ì§€**
```typescript
// ì œì•ˆ: ëª…ì„¸ì„œì— êµ¬ì²´ì  êµ¬í˜„ ì˜ˆì‹œ ì¶”ê°€
'use client';
import { usePathname, useSearchParams } from 'next/navigation';
import { useEffect, useRef } from 'react';

export function Tracker() {
  const pathname = usePathname();
  const searchParams = useSearchParams();
  const sessionKeyRef = useRef<string | null>(null);
  
  useEffect(() => {
    // ì„¸ì…˜ í‚¤ ìƒì„±/ê°±ì‹  ë¡œì§
    // track í˜¸ì¶œ ë¡œì§
  }, [pathname, searchParams]);
}
```

**5.2 ì„¸ì…˜ ë§Œë£Œ ì‹œê°„ ê´€ë¦¬**
```typescript
// ì œì•ˆ: localStorageì— ë§Œë£Œ ì‹œê°„ë„ ì €ì¥
const SESSION_EXPIRY_MS = 30 * 60 * 1000; // 30ë¶„
const lastSeen = localStorage.getItem('uslab_sid_last');
if (!lastSeen || Date.now() - parseInt(lastSeen) > SESSION_EXPIRY_MS) {
  sessionKeyRef.current = crypto.randomUUID();
  localStorage.setItem('uslab_sid', sessionKeyRef.current);
}
localStorage.setItem('uslab_sid_last', Date.now().toString());
```

**5.3 í˜ì´ì§€ ì–¸ë¡œë“œ ì‹œ ì „ì†¡**
```typescript
// ì œì•ˆ: í˜ì´ì§€ ë‹«í ë•Œë„ ì „ì†¡ ë³´ì¥
useEffect(() => {
  const handleBeforeUnload = () => {
    navigator.sendBeacon('/api/track', ...);
  };
  window.addEventListener('beforeunload', handleBeforeUnload);
  return () => window.removeEventListener('beforeunload', handleBeforeUnload);
}, []);
```

---

### 6. Analytics ì¿¼ë¦¬ âœ…

#### âœ… ì˜ ëœ ì 
- Asia/Seoul íƒ€ì„ì¡´ ëª…ì‹œ
- ì¼ë³„ ì§‘ê³„ ì¿¼ë¦¬ ì˜ˆì‹œ ì œê³µ
- Top pages/referrers ì¿¼ë¦¬ í¬í•¨

#### âš ï¸ ë³´ì™„ ì œì•ˆ

**6.1 ì„±ëŠ¥ ìµœì í™”: Materialized View ê³ ë ¤**
```sql
-- ì œì•ˆ: Step 2ì—ì„œ ê³ ë ¤í•  ì‚¬í•­
-- ì¼ë³„ ì§‘ê³„ë¥¼ Materialized Viewë¡œ ìºì‹±
create materialized view uslab_mv_daily_stats as
select
  date_trunc('day', created_at at time zone 'Asia/Seoul') as day,
  count(*) as pageviews,
  count(distinct session_id) as uniques
from uslab_page_views
group by 1;

-- ì£¼ê¸°ì  ê°±ì‹  (ì˜ˆ: ë§¤ì¼ ìì •)
refresh materialized view concurrently uslab_mv_daily_stats;
```
ì´ìœ : ëŒ€ì‹œë³´ë“œ ë¡œë”© ì†ë„ í–¥ìƒ (Step 1ì—ì„œëŠ” ë¶ˆí•„ìš”, Step 2+ ê³ ë ¤)

**6.2 Top Posts ì¿¼ë¦¬ ë³´ì™„**
```sql
-- ì œì•ˆ: ëª…ì„¸ì„œì— Top Posts ì¿¼ë¦¬ ì¶”ê°€
select 
  p.id,
  p.title,
  p.locale,
  count(*) as pageviews_30d,
  count(distinct pv.session_id) as uniques_30d
from uslab_page_views pv
join uslab_posts p on pv.post_id = p.id
where pv.created_at >= now() - interval '30 days'
  and p.is_published = true
group by p.id, p.title, p.locale
order by pageviews_30d desc
limit 20;
```

---

### 7. SEO ê¸°ìˆ ì  êµ¬í˜„ âœ…

#### âœ… ì˜ ëœ ì 
- sitemap.ts, robots.ts ëª…ì‹œ
- JSON-LD ìŠ¤í‚¤ë§ˆ íƒ€ì… ëª…ì‹œ
- Canonical URL ì „ëµ ëª…í™•

#### âš ï¸ ë³´ì™„ ì œì•ˆ

**7.1 sitemap.ts êµ¬ì²´ì  êµ¬í˜„ ì˜ˆì‹œ**
```typescript
// ì œì•ˆ: ëª…ì„¸ì„œì— êµ¬í˜„ ì˜ˆì‹œ ì¶”ê°€
import { MetadataRoute } from 'next';
import { getPublishedPosts } from '@/lib/queries/posts';

export default async function sitemap(): Promise<MetadataRoute.Sitemap> {
  const posts = await getPublishedPosts();
  
  const postUrls = posts.flatMap(post => [
    {
      url: `https://uslab.ai/ko/blog/${post.slug}`,
      lastModified: post.updated_at,
      changeFrequency: 'weekly' as const,
      priority: 0.8,
    },
    ...(post.canonical_id ? [{
      url: `https://uslab.ai/en/blog/${post.slug}`,
      lastModified: post.updated_at,
      changeFrequency: 'weekly' as const,
      priority: 0.8,
    }] : []),
  ]);
  
  return [
    {
      url: 'https://uslab.ai',
      lastModified: new Date(),
      changeFrequency: 'daily',
      priority: 1,
    },
    ...postUrls,
  ];
}
```

**7.2 robots.ts êµ¬ì²´ì  êµ¬í˜„ ì˜ˆì‹œ**
```typescript
// ì œì•ˆ: ëª…ì„¸ì„œì— êµ¬í˜„ ì˜ˆì‹œ ì¶”ê°€
import { MetadataRoute } from 'next';

export default function robots(): MetadataRoute.Robots {
  return {
    rules: [
      {
        userAgent: '*',
        allow: '/',
        disallow: ['/admin/', '/api/'],
      },
    ],
    sitemap: 'https://uslab.ai/sitemap.xml',
  };
}
```

**7.3 JSON-LD Organization ìŠ¤í‚¤ë§ˆ**
```typescript
// ì œì•ˆ: ëª…ì„¸ì„œì— Organization ìŠ¤í‚¤ë§ˆ ì˜ˆì‹œ ì¶”ê°€
const organizationSchema = {
  '@context': 'https://schema.org',
  '@type': 'Organization',
  name: 'USLab.ai',
  url: 'https://uslab.ai',
  logo: 'https://uslab.ai/logo.png',
  sameAs: [
    // ì†Œì…œ ë¯¸ë””ì–´ ë§í¬
  ],
};
```

---

### 8. Admin UI êµ¬ì¡° âœ…

#### âœ… ì˜ ëœ ì 
- ë¼ìš°íŠ¸ êµ¬ì¡° ëª…í™•
- ë„¤ë¹„ê²Œì´ì…˜ ì„¹ì…˜ êµ¬ë¶„ ì ì ˆ
- Comments/Inquiries ê´€ë¦¬ ì¶”ê°€ ê³„íš

#### âš ï¸ ë³´ì™„ ì œì•ˆ

**8.1 Dashboard ì°¨íŠ¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ ëª…ì‹œ**
```markdown
// ì œì•ˆ: ëª…ì„¸ì„œì— ì°¨íŠ¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì¶”ì²œ ì¶”ê°€
- ì¶”ì²œ: recharts (React ì¹œí™”ì , ë¬´ë£Œ)
- ëŒ€ì•ˆ: chart.js + react-chartjs-2
- ì„¤ì¹˜: npm install recharts
```

**8.2 Admin ë ˆì´ì•„ì›ƒ ì»´í¬ë„ŒíŠ¸**
```typescript
// ì œì•ˆ: ëª…ì„¸ì„œì— AdminLayout ì»´í¬ë„ŒíŠ¸ êµ¬ì¡° ì¶”ê°€
// components/admin/AdminLayout.tsx
export function AdminLayout({ children }: { children: React.ReactNode }) {
  return (
    <div className="flex">
      <AdminSidebar />
      <main className="flex-1">{children}</main>
    </div>
  );
}
```

---

### 9. Retention ì •ì±… âœ…

#### âœ… ì˜ ëœ ì 
- 90ì¼ ë³´ê´€ ì •ì±… ëª…í™•
- ì‚­ì œ SQL ì œê³µ
- ì¸ë±ìŠ¤ ê³ ë ¤

#### âš ï¸ ë³´ì™„ ì œì•ˆ

**9.1 Retention í•¨ìˆ˜í™”**
```sql
-- ì œì•ˆ: ëª…ì„¸ì„œì— í•¨ìˆ˜ë¡œ ì œê³µ
create or replace function uslab_cleanup_old_tracking()
returns integer
language plpgsql
security definer
as $$
declare
  deleted_count integer;
begin
  -- 90ì¼ ì§€ë‚œ page_views ì‚­ì œ
  delete from uslab_page_views
  where created_at < now() - interval '90 days';
  
  get diagnostics deleted_count = row_count;
  
  -- orphan sessions ì‚­ì œ
  delete from uslab_sessions s
  where s.created_at < now() - interval '90 days'
    and not exists (select 1 from uslab_page_views pv where pv.session_id = s.id);
  
  return deleted_count;
end;
$$;
```

**9.2 Vercel Cron ì„¤ì • ì˜ˆì‹œ**
```typescript
// ì œì•ˆ: ëª…ì„¸ì„œì— Vercel Cron ì„¤ì • ì˜ˆì‹œ ì¶”ê°€
// app/api/admin/retention/route.ts
export async function GET(req: Request) {
  // ì¸ì¦ í™•ì¸
  const { data, error } = await supabase.rpc('uslab_cleanup_old_tracking');
  return Response.json({ deleted: data });
}

// vercel.json
{
  "crons": [{
    "path": "/api/admin/retention",
    "schedule": "0 2 * * 0"  // ë§¤ì£¼ ì¼ìš”ì¼ ìƒˆë²½ 2ì‹œ
  }]
}
```

---

### 10. ìˆ˜ìš© ê¸°ì¤€ (Acceptance Criteria) âœ…

#### âœ… ì˜ ëœ ì 
- ëª…í™•í•œ í…ŒìŠ¤íŠ¸ ê¸°ì¤€ ì œì‹œ
- ë´‡ í•„í„°ë§, ì„¸ì…˜, ì„±ëŠ¥, ë³´ê´€ ëª¨ë‘ í¬í•¨

#### âš ï¸ ë³´ì™„ ì œì•ˆ

**10.1 ì¶”ê°€ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤**
```markdown
- (ì„¸ì…˜ ì§€ì†ì„±) ê°™ì€ ë¸Œë¼ìš°ì €ì—ì„œ 25ë¶„ í›„ ì¬ë°©ë¬¸ ì‹œ ë™ì¼ session_key ìœ ì§€
- (ì„¸ì…˜ ë§Œë£Œ) 31ë¶„ í›„ ì¬ë°©ë¬¸ ì‹œ ìƒˆ session_key ë°œê¸‰
- (UTM ì¶”ì ) ?utm_source=google&utm_medium=cpc ì ‘ì† ì‹œ DBì— ì •í™•íˆ ì €ì¥
- (Referrer) google.comì—ì„œ ìœ ì… ì‹œ referrer_hostê°€ 'google.com'ìœ¼ë¡œ ì €ì¥
- (ë‹¤êµ­ì–´) /ko/blog/postì™€ /en/blog/postê°€ ë³„ë„ page_pathë¡œ ê¸°ë¡
```

---

## ğŸ“‹ ëˆ„ë½ëœ í•­ëª© ë° ì¶”ê°€ ì œì•ˆ

### 1. ì—ëŸ¬ ì²˜ë¦¬ ë° ëª¨ë‹ˆí„°ë§

**ì œì•ˆ ì¶”ê°€**:
```markdown
### ì—ëŸ¬ ì²˜ë¦¬ ì „ëµ
- /api/trackì—ì„œ DB ì—ëŸ¬ ë°œìƒ ì‹œ:
  - í´ë¼ì´ì–¸íŠ¸ì—ëŠ” 204 ë°˜í™˜ (UX ì˜í–¥ ì—†ìŒ)
  - ì„œë²„ ë¡œê·¸ì— ì—ëŸ¬ ê¸°ë¡ (Vercel Logs)
  - ì‹¬ê°í•œ ì—ëŸ¬ëŠ” Sentry ë“±ìœ¼ë¡œ ì•Œë¦¼ (ì„ íƒ)
```

### 2. ë°ì´í„° ë§ˆì´ê·¸ë ˆì´ì…˜ ì „ëµ

**ì œì•ˆ ì¶”ê°€**:
```markdown
### ê¸°ì¡´ ì¡°íšŒìˆ˜ ë°ì´í„°ì™€ì˜ í˜¸í™˜ì„±
- ê¸°ì¡´ posts.view_countëŠ” ìœ ì§€ (í•˜ìœ„ í˜¸í™˜ì„±)
- ìƒˆë¡œìš´ íŠ¸ë˜í‚¹ ë°ì´í„°ì™€ ë³‘í–‰ ìˆ˜ì§‘
- ëŒ€ì‹œë³´ë“œì—ì„œ ë‘ ë°ì´í„° ì†ŒìŠ¤ ëª¨ë‘ í‘œì‹œ ê°€ëŠ¥í•˜ë„ë¡ ì„¤ê³„
```

### 3. ê°œì¸ì •ë³´ ë³´í˜¸ (GDPR ì¤€ìˆ˜)

**ì œì•ˆ ì¶”ê°€**:
```markdown
### ê°œì¸ì •ë³´ ë³´í˜¸
- IP ì£¼ì†Œ ì €ì¥ ì•ˆ í•¨ (v1) âœ…
- ì¿ í‚¤ ê¸°ë°˜ ì„¸ì…˜ í‚¤ëŠ” ìµëª… (ê°œì¸ ì‹ë³„ ë¶ˆê°€) âœ…
- í–¥í›„ GDPR ìš”ì²­ ì‹œ ì„¸ì…˜ ë°ì´í„° ì‚­ì œ ê¸°ëŠ¥ ê³ ë ¤ (Step 2+)
```

### 4. ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§

**ì œì•ˆ ì¶”ê°€**:
```markdown
### ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§
- /api/track ì‘ë‹µ ì‹œê°„ ëª©í‘œ: < 100ms (p95)
- ëŒ€ì‹œë³´ë“œ ì¿¼ë¦¬ ì‘ë‹µ ì‹œê°„ ëª©í‘œ: < 500ms (p95)
- íŠ¸ë˜í‚¹ ë°ì´í„° insert ì†ë„ ëª¨ë‹ˆí„°ë§
```

---

## ğŸ¯ ìš°ì„ ìˆœìœ„ë³„ ê°œì„  ì‚¬í•­

### ğŸ”´ ë†’ì€ ìš°ì„ ìˆœìœ„ (ë°˜ë“œì‹œ ë°˜ì˜)

1. **DB ìŠ¤í‚¤ë§ˆ ë³´ì™„**
   - `uslab_page_views`ì— `about_id` ì»¬ëŸ¼ ì¶”ê°€
   - ì„¸ì…˜ í‚¤ UNIQUE ì¸ë±ìŠ¤ ëª…ì‹œì  ìƒì„±

2. **API êµ¬í˜„ ì˜ˆì‹œ ì¶”ê°€**
   - `/api/track` ì „ì²´ ì½”ë“œ ì˜ˆì‹œ
   - Bot í•„í„°ë§ í•¨ìˆ˜ ì˜ˆì‹œ
   - Device type íŒŒì‹± í•¨ìˆ˜ ì˜ˆì‹œ

3. **í´ë¼ì´ì–¸íŠ¸ ì»´í¬ë„ŒíŠ¸ êµ¬í˜„ ì˜ˆì‹œ**
   - `Tracker.tsx` ì „ì²´ ì½”ë“œ ì˜ˆì‹œ
   - Next.js App Router ë¼ìš°íŒ… ê°ì§€ ë¡œì§

### ğŸŸ¡ ì¤‘ê°„ ìš°ì„ ìˆœìœ„ (ê¶Œì¥)

4. **SEO êµ¬í˜„ ì˜ˆì‹œ**
   - `sitemap.ts` ì „ì²´ ì½”ë“œ
   - `robots.ts` ì „ì²´ ì½”ë“œ
   - JSON-LD ìŠ¤í‚¤ë§ˆ ì˜ˆì‹œ

5. **Analytics ì¿¼ë¦¬ ë³´ì™„**
   - Top Posts ì¿¼ë¦¬ ì¶”ê°€
   - ì„±ëŠ¥ ìµœì í™” ê³ ë ¤ì‚¬í•­

6. **Retention ìë™í™”**
   - í•¨ìˆ˜í™”
   - Vercel Cron ì„¤ì • ì˜ˆì‹œ

### ğŸŸ¢ ë‚®ì€ ìš°ì„ ìˆœìœ„ (ì„ íƒ)

7. **Materialized View** (Step 2+)
8. **Rate Limiting** (Step 2+)
9. **ì—ëŸ¬ ëª¨ë‹ˆí„°ë§ (Sentry)** (Step 2+)

---

## âœ… ìµœì¢… í‰ê°€ ë° ê¶Œì¥ì‚¬í•­

### ê°•ì  ìš”ì•½
1. âœ… **í˜„ì‹¤ì ì¸ MVP ì ‘ê·¼**: ê³¼ë„í•œ ì—”ì§€ë‹ˆì–´ë§ ì—†ì´ ì‹¤ìš©ì 
2. âœ… **ìš´ì˜ ê³ ë ¤ì‚¬í•­**: Bot í•„í„°ë§, Retention, ì„±ëŠ¥ ëª¨ë‘ ê³ ë ¤
3. âœ… **ë‹¨ê³„ì  í™•ì¥**: Step 1 â†’ Step 2+ ëª…í™•
4. âœ… **êµ¬ì²´ì  ìŠ¤í™**: DB ìŠ¤í‚¤ë§ˆ, API ì„¤ê³„, ì¿¼ë¦¬ê¹Œì§€ í¬í•¨

### ê°œì„  ê¶Œì¥ì‚¬í•­
1. **êµ¬í˜„ ì˜ˆì‹œ ì½”ë“œ ì¶”ê°€**: ëª…ì„¸ì„œì— ì‹¤ì œ ì½”ë“œ ì˜ˆì‹œ í¬í•¨ ì‹œ Cursorê°€ ë°”ë¡œ ì ìš© ê°€ëŠ¥
2. **ì—ëŸ¬ ì²˜ë¦¬ ì „ëµ ëª…ì‹œ**: ìš´ì˜ í™˜ê²½ì—ì„œì˜ ì—ëŸ¬ ì²˜ë¦¬ ë°©ë²•
3. **ì„±ëŠ¥ ëª©í‘œ ì„¤ì •**: ì‘ë‹µ ì‹œê°„, ì²˜ë¦¬ëŸ‰ ëª©í‘œ ëª…ì‹œ

### ê²°ë¡ 
**ì´ ëª…ì„¸ì„œëŠ” ë°”ë¡œ êµ¬í˜„ ê°€ëŠ¥í•œ ìˆ˜ì¤€ì˜ ì™„ì„±ë„**ë¥¼ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤. ìœ„ì˜ ë³´ì™„ ì œì•ˆì‚¬í•­ì„ ë°˜ì˜í•˜ë©´ ë”ìš± ì™„ë²½í•´ì§ˆ ê²ƒì…ë‹ˆë‹¤.

íŠ¹íˆ **Step 1 êµ¬í˜„ì„ ìœ„í•œ í•µì‹¬ ì½”ë“œ ì˜ˆì‹œ**ë¥¼ ì¶”ê°€í•˜ë©´, Cursorì— ê·¸ëŒ€ë¡œ ë¶™ì—¬ë„£ì–´ ë°”ë¡œ ì‘ì—…ì„ ì‹œì‘í•  ìˆ˜ ìˆì„ ê²ƒì…ë‹ˆë‹¤.

---

**ê²€í†  ì™„ë£Œì¼**: 2025-01-15


