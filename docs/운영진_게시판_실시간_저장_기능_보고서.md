# ìš´ì˜ì§„ ê²Œì‹œíŒ ì‹¤ì‹œê°„ ì €ì¥ ê¸°ëŠ¥ êµ¬í˜„ ë³´ê³ ì„œ

**ì‘ì„± ì¼ì**: 2025-01-16  
**í”„ë¡œì íŠ¸**: uslab-web  
**ê¸°ëŠ¥**: ìš´ì˜ì§„ ê²Œì‹œíŒ ë¬¸ì„œ ìë™ ì €ì¥ (Notion ìŠ¤íƒ€ì¼)

---

## ğŸ“‹ ê°œìš”

ìš´ì˜ì§„ ê²Œì‹œíŒì€ **Notion ìŠ¤íƒ€ì¼ì˜ ì‹¤ì‹œê°„ ìë™ ì €ì¥** ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤. ì‚¬ìš©ìê°€ ì œëª©ì´ë‚˜ ë³¸ë¬¸ì„ ìˆ˜ì •í•˜ë©´ **ì €ì¥ ë²„íŠ¼ ì—†ì´ ìë™ìœ¼ë¡œ ì €ì¥**ë©ë‹ˆë‹¤.

### ì£¼ìš” íŠ¹ì§•
- âœ… **ì €ì¥ ë²„íŠ¼ ì—†ìŒ**: Notionì²˜ëŸ¼ ìë™ ì €ì¥
- âœ… **Debounce ê¸°ë°˜**: 2ì´ˆ ëŒ€ê¸° í›„ ì €ì¥ (ë¶ˆí•„ìš”í•œ ìš”ì²­ ë°©ì§€)
- âœ… **localStorage ë°±ì—…**: ì˜¤í”„ë¼ì¸/ì—ëŸ¬ ì‹œ ë¡œì»¬ ë°±ì—…
- âœ… **ì €ì¥ ìƒíƒœ í‘œì‹œ**: ì €ì¥ ì¤‘, ì €ì¥ë¨, ì €ì¥ ì‹¤íŒ¨, ì˜¤í”„ë¼ì¸ ìƒíƒœ í‘œì‹œ
- âœ… **ì˜¤í”„ë¼ì¸ ì§€ì›**: ì˜¤í”„ë¼ì¸ ì‹œ ë¡œì»¬ ë°±ì—…, ì˜¨ë¼ì¸ ë³µê·€ ì‹œ ìë™ ë™ê¸°í™”

---

## ğŸ—ï¸ ì•„í‚¤í…ì²˜

### ì „ì²´ íë¦„

```
ì‚¬ìš©ì ì…ë ¥ (ì œëª©/ë³¸ë¬¸ ë³€ê²½)
    â†“
triggerSave() í˜¸ì¶œ
    â†“
ì¦‰ì‹œ localStorage ë°±ì—…
    â†“
2ì´ˆ debounce ëŒ€ê¸°
    â†“
ì„œë²„ ì €ì¥ (PATCH /api/admin/exec-docs/[id])
    â†“
ì €ì¥ ìƒíƒœ ì—…ë°ì´íŠ¸
    â†“
localStorage ë°±ì—… (ìµœì¢…)
```

---

## ğŸ”§ êµ¬í˜„ ìƒì„¸

### 1. useAutoSave í›…

**íŒŒì¼**: `lib/hooks/useAutoSave.ts`

#### ì¸í„°í˜ì´ìŠ¤

```typescript:6:12:lib/hooks/useAutoSave.ts
export type SaveStatus = 'saved' | 'saving' | 'error' | 'offline';

interface UseAutoSaveOptions {
  docId: string;
  debounceMs?: number;
  onSave?: (content: JSONContent, title?: string) => Promise<void>;
}
```

**ì €ì¥ ìƒíƒœ**:
- `saved`: ì €ì¥ ì™„ë£Œ
- `saving`: ì €ì¥ ì¤‘
- `error`: ì €ì¥ ì‹¤íŒ¨
- `offline`: ì˜¤í”„ë¼ì¸ ìƒíƒœ

#### í•µì‹¬ ê¸°ëŠ¥

##### 1) ì˜¨ë¼ì¸/ì˜¤í”„ë¼ì¸ ìƒíƒœ ê°ì§€

```typescript:30:49:lib/hooks/useAutoSave.ts
// ì˜¨ë¼ì¸/ì˜¤í”„ë¼ì¸ ìƒíƒœ ê°ì§€
useEffect(() => {
  const handleOnline = () => {
    isOnlineRef.current = true;
    setSaveStatus((prev) => (prev === 'offline' ? 'saved' : prev));
  };

  const handleOffline = () => {
    isOnlineRef.current = false;
    setSaveStatus('offline');
  };

  window.addEventListener('online', handleOnline);
  window.addEventListener('offline', handleOffline);

  return () => {
    window.removeEventListener('online', handleOnline);
    window.removeEventListener('offline', handleOffline);
  };
}, []);
```

**ë™ì‘**:
- ë¸Œë¼ìš°ì €ì˜ `online`/`offline` ì´ë²¤íŠ¸ ê°ì§€
- ì˜¤í”„ë¼ì¸ ì‹œ ìƒíƒœë¥¼ `offline`ìœ¼ë¡œ ë³€ê²½
- ì˜¨ë¼ì¸ ë³µê·€ ì‹œ ìë™ìœ¼ë¡œ ìƒíƒœ ì—…ë°ì´íŠ¸

##### 2) localStorage ë°±ì—…

```typescript:57:70:lib/hooks/useAutoSave.ts
// localStorage ë°±ì—…
const backupToLocal = useCallback(
  (content: JSONContent, title?: string) => {
    try {
      localStorage.setItem(getBackupKey('content'), JSON.stringify(content));
      if (title) {
        localStorage.setItem(getBackupKey('title'), title);
      }
    } catch (error) {
      console.error('Error backing up to localStorage:', error);
    }
  },
  [getBackupKey]
);
```

**ë°±ì—… í‚¤ í˜•ì‹**: `exec-doc-{docId}-{type}`
- `exec-doc-{docId}-content`: ë³¸ë¬¸ ë°±ì—…
- `exec-doc-{docId}-title`: ì œëª© ë°±ì—…

**ë°±ì—… ì‹œì **:
1. **ì¦‰ì‹œ ë°±ì—…**: `triggerSave()` í˜¸ì¶œ ì‹œ
2. **ì €ì¥ ì„±ê³µ í›„**: ì„œë²„ ì €ì¥ ì™„ë£Œ í›„
3. **ì˜¤í”„ë¼ì¸ ì‹œ**: ì˜¤í”„ë¼ì¸ ìƒíƒœì—ì„œë„ ë°±ì—…

##### 3) localStorage ë³µì›

```typescript:72:85:lib/hooks/useAutoSave.ts
// localStorageì—ì„œ ë³µì›
const restoreFromLocal = useCallback((): { content: JSONContent | null; title: string | null } => {
  try {
    const contentStr = localStorage.getItem(getBackupKey('content'));
    const title = localStorage.getItem(getBackupKey('title'));
    return {
      content: contentStr ? JSON.parse(contentStr) : null,
      title,
    };
  } catch (error) {
    console.error('Error restoring from localStorage:', error);
    return { content: null, title: null };
  }
}, [getBackupKey]);
```

**ì‚¬ìš© ì‹œë‚˜ë¦¬ì˜¤**:
- í˜ì´ì§€ ìƒˆë¡œê³ ì¹¨ ì‹œ ë¡œì»¬ ë°±ì—… ë³µì›
- ì„œë²„ ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨ ì‹œ ë¡œì»¬ ë°±ì—…ìœ¼ë¡œ ëŒ€ì²´

##### 4) ì €ì¥ ì‹¤í–‰

```typescript:87:115:lib/hooks/useAutoSave.ts
// ì €ì¥ ì‹¤í–‰
const performSave = useCallback(
  async (content: JSONContent, title?: string) => {
    if (!isOnlineRef.current) {
      setSaveStatus('offline');
      backupToLocal(content, title);
      return;
    }

    if (!onSave) {
      backupToLocal(content, title);
      return;
    }

    setSaveStatus('saving');

    try {
      await onSave(content, title);
      setSaveStatus('saved');
      setLastSaved(new Date());
      backupToLocal(content, title);
    } catch (error) {
      console.error('Error saving:', error);
      setSaveStatus('error');
      backupToLocal(content, title);
    }
  },
  [onSave, backupToLocal]
);
```

**ë™ì‘ ìˆœì„œ**:
1. ì˜¤í”„ë¼ì¸ í™•ì¸ â†’ ì˜¤í”„ë¼ì¸ì´ë©´ ë¡œì»¬ ë°±ì—…ë§Œ ìˆ˜í–‰
2. `onSave` ì½œë°± ì—†ìŒ â†’ ë¡œì»¬ ë°±ì—…ë§Œ ìˆ˜í–‰
3. ì €ì¥ ì‹œì‘ â†’ ìƒíƒœë¥¼ `saving`ìœ¼ë¡œ ë³€ê²½
4. ì €ì¥ ì„±ê³µ â†’ ìƒíƒœë¥¼ `saved`ë¡œ ë³€ê²½, `lastSaved` ì—…ë°ì´íŠ¸
5. ì €ì¥ ì‹¤íŒ¨ â†’ ìƒíƒœë¥¼ `error`ë¡œ ë³€ê²½
6. ëª¨ë“  ê²½ìš°ì— ë¡œì»¬ ë°±ì—… ìˆ˜í–‰

##### 5) ìë™ì €ì¥ íŠ¸ë¦¬ê±° (Debounce)

```typescript:117:134:lib/hooks/useAutoSave.ts
// ìë™ì €ì¥ íŠ¸ë¦¬ê±° (debounce)
const triggerSave = useCallback(
  (content: JSONContent, title?: string) => {
    // ê¸°ì¡´ íƒ€ì´ë¨¸ ì·¨ì†Œ
    if (timeoutRef.current) {
      clearTimeout(timeoutRef.current);
    }

    // ì¦‰ì‹œ localStorage ë°±ì—…
    backupToLocal(content, title);

    // debounce í›„ ì„œë²„ ì €ì¥
    timeoutRef.current = setTimeout(() => {
      performSave(content, title);
    }, debounceMs);
  },
  [debounceMs, backupToLocal, performSave]
);
```

**Debounce ë™ì‘**:
1. **ê¸°ì¡´ íƒ€ì´ë¨¸ ì·¨ì†Œ**: ì—°ì† ì…ë ¥ ì‹œ ì´ì „ íƒ€ì´ë¨¸ ì·¨ì†Œ
2. **ì¦‰ì‹œ ë¡œì»¬ ë°±ì—…**: ì…ë ¥ ì¦‰ì‹œ localStorageì— ë°±ì—…
3. **2ì´ˆ ëŒ€ê¸°**: `debounceMs` (ê¸°ë³¸ 2000ms) í›„ ì„œë²„ ì €ì¥
4. **ì„œë²„ ì €ì¥**: `performSave()` í˜¸ì¶œ

**ì¥ì **:
- ë¶ˆí•„ìš”í•œ ì„œë²„ ìš”ì²­ ë°©ì§€
- ì‚¬ìš©ì ì…ë ¥ ì¤‘ë‹¨ í›„ ì €ì¥
- ë¡œì»¬ ë°±ì—…ìœ¼ë¡œ ë°ì´í„° ì†ì‹¤ ë°©ì§€

---

### 2. ExecDocEditor ì»´í¬ë„ŒíŠ¸

**íŒŒì¼**: `components/admin/exec-board/ExecDocEditor.tsx`

#### ìë™ì €ì¥ ì„¤ì •

```typescript:23:52:components/admin/exec-board/ExecDocEditor.tsx
// ìë™ì €ì¥
const { saveStatus, lastSaved, triggerSave, restoreFromLocal } = useAutoSave({
  docId,
  debounceMs: 2000,
  onSave: async (savedContent: JSONContent, savedTitle?: string) => {
    const { data: { session } } = await supabase.auth.getSession();
    if (!session) {
      throw new Error('ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.');
    }

    const response = await fetch(`/api/admin/exec-docs/${docId}`, {
      method: 'PATCH',
      headers: {
        'Content-Type': 'application/json',
        Authorization: `Bearer ${session.access_token}`,
      },
      body: JSON.stringify({
        title: savedTitle || title,
        content: savedContent,
      }),
    });

    if (!response.ok) {
      const error = await response.json();
      throw new Error(error.error || 'ì €ì¥ ì‹¤íŒ¨');
    }

    onSaved();
  },
});
```

**ì„¤ì •**:
- `debounceMs: 2000`: 2ì´ˆ ëŒ€ê¸° í›„ ì €ì¥
- `onSave`: PATCH API í˜¸ì¶œí•˜ì—¬ ì„œë²„ ì €ì¥

#### ë¡œì»¬ ë°±ì—… ë³µì›

```typescript:58:69:components/admin/exec-board/ExecDocEditor.tsx
// ë¡œì»¬ ë°±ì—…ì—ì„œ ë³µì› (í˜ì´ì§€ ë¡œë“œ ì‹œ)
useEffect(() => {
  if (!doc && !loading) {
    const backup = restoreFromLocal();
    if (backup.content) {
      setContent(backup.content);
      if (backup.title) {
        setTitle(backup.title);
      }
    }
  }
}, [doc, loading, restoreFromLocal]);
```

**ë™ì‘**:
- ì„œë²„ì—ì„œ ë¬¸ì„œë¥¼ ë¶ˆëŸ¬ì˜¤ì§€ ëª»í•œ ê²½ìš°
- ë¡œì»¬ ë°±ì—…ì´ ìˆìœ¼ë©´ ë³µì›í•˜ì—¬ í‘œì‹œ

#### ì œëª© ë³€ê²½ í•¸ë“¤ëŸ¬

```typescript:95:101:components/admin/exec-board/ExecDocEditor.tsx
const handleTitleChange = (e: React.ChangeEvent<HTMLInputElement>) => {
  const newTitle = e.target.value;
  setTitle(newTitle);
  if (content) {
    triggerSave(content, newTitle);
  }
};
```

**ë™ì‘**:
- ì œëª© ë³€ê²½ ì‹œ ì¦‰ì‹œ `triggerSave()` í˜¸ì¶œ
- 2ì´ˆ debounce í›„ ì„œë²„ ì €ì¥

#### ë³¸ë¬¸ ë³€ê²½ í•¸ë“¤ëŸ¬

```typescript:103:106:components/admin/exec-board/ExecDocEditor.tsx
const handleContentChange = (newContent: JSONContent) => {
  setContent(newContent);
  triggerSave(newContent, title);
};
```

**ë™ì‘**:
- ì—ë””í„°ì˜ `onChange` ì´ë²¤íŠ¸ì—ì„œ í˜¸ì¶œ
- ë³¸ë¬¸ ë³€ê²½ ì‹œ ì¦‰ì‹œ `triggerSave()` í˜¸ì¶œ
- 2ì´ˆ debounce í›„ ì„œë²„ ì €ì¥

**ì°¸ê³ **: `BlogEditor`ì˜ `onUpdate`ëŠ” debounce ì—†ì´ ì¦‰ì‹œ í˜¸ì¶œë©ë‹ˆë‹¤:

```typescript:226:230:components/editor/BlogEditor.tsx
onUpdate={({ editor }) => {
  // ì¦‰ì‹œ onChange í˜¸ì¶œ (debounce ì œê±°)
  const json = editor.getJSON();
  onChange(json);
}},
```

ë”°ë¼ì„œ `handleContentChange`ì—ì„œ debounceê°€ ì ìš©ë©ë‹ˆë‹¤.

#### ì €ì¥ ìƒíƒœ í‘œì‹œ

```typescript:164:181:components/admin/exec-board/ExecDocEditor.tsx
{/* ì €ì¥ ìƒíƒœ */}
<div className="flex items-center gap-2 text-xs">
  {saveStatus === 'saving' && (
    <span className="text-yellow-600">ì €ì¥ ì¤‘...</span>
  )}
  {saveStatus === 'saved' && lastSaved && (
    <span className="text-green-600">
      ì €ì¥ë¨ {lastSaved.toLocaleTimeString('ko-KR', { hour: '2-digit', minute: '2-digit' })}
    </span>
  )}
  {saveStatus === 'error' && (
    <span className="text-red-600">ì €ì¥ ì‹¤íŒ¨</span>
  )}
  {saveStatus === 'offline' && (
    <span className="text-slate-600">ì˜¤í”„ë¼ì¸ - ë™ê¸°í™” ëŒ€ê¸° ì¤‘</span>
  )}
</div>
```

**í‘œì‹œ ë‚´ìš©**:
- **ì €ì¥ ì¤‘**: ë…¸ë€ìƒ‰ "ì €ì¥ ì¤‘..." í…ìŠ¤íŠ¸
- **ì €ì¥ë¨**: ì´ˆë¡ìƒ‰ "ì €ì¥ë¨ HH:MM" í…ìŠ¤íŠ¸
- **ì €ì¥ ì‹¤íŒ¨**: ë¹¨ê°„ìƒ‰ "ì €ì¥ ì‹¤íŒ¨" í…ìŠ¤íŠ¸
- **ì˜¤í”„ë¼ì¸**: íšŒìƒ‰ "ì˜¤í”„ë¼ì¸ - ë™ê¸°í™” ëŒ€ê¸° ì¤‘" í…ìŠ¤íŠ¸

---

### 3. API ì—”ë“œí¬ì¸íŠ¸

**íŒŒì¼**: `app/api/admin/exec-docs/[id]/route.ts`

#### PATCH ì—”ë“œí¬ì¸íŠ¸

```typescript:42:80:app/api/admin/exec-docs/[id]/route.ts
/**
 * PATCH /api/admin/exec-docs/[id]
 * ë¬¸ì„œ ìˆ˜ì • (ìë™ì €ì¥ ì‹œ ì‚¬ìš©)
 */
export async function PATCH(
  request: NextRequest,
  { params }: { params: Promise<{ id: string }> }
) {
  try {
    // ì¸ì¦ ë° ìš´ì˜ì§„ í™•ì¸
    const authHeader = request.headers.get('authorization');
    const { user, error: authError } = await verifyAdminAuth(authHeader);

    if (authError || !user) {
      const status = authError?.includes('Forbidden') ? 403 : 401;
      return NextResponse.json({ error: authError || 'Unauthorized' }, { status });
    }

    const { id } = await params;
    const body: UpdateDocData = await request.json();

    const doc = await updateDoc(id, body, user.id);

    if (!doc) {
      return NextResponse.json(
        { error: 'Failed to update doc' },
        { status: 500 }
      );
    }

    return NextResponse.json({ doc });
  } catch (error) {
    console.error('Error updating doc:', error);
    return NextResponse.json(
      { error: 'Failed to update doc' },
      { status: 500 }
    );
  }
}
```

**ìš”ì²­ í˜•ì‹**:
```json
{
  "title": "ë¬¸ì„œ ì œëª©",
  "content": { /* Tiptap JSON */ }
}
```

**ì‘ë‹µ í˜•ì‹**:
```json
{
  "doc": {
    "id": "...",
    "title": "...",
    "content": { /* Tiptap JSON */ },
    "updated_at": "...",
    "updated_by": "..."
  }
}
```

---

### 4. ë°ì´í„°ë² ì´ìŠ¤ ì—…ë°ì´íŠ¸

**íŒŒì¼**: `lib/queries/execDocs.ts`

```typescript:142:176:lib/queries/execDocs.ts
/**
 * ë¬¸ì„œ ìˆ˜ì •
 */
export async function updateDoc(
  id: string,
  docData: UpdateDocData,
  userId: string
): Promise<ExecDoc | null> {
  const supabase = getServerSupabase();

  const updateData: any = {
    ...docData,
    updated_by: userId,
  };

  // soft delete ì²˜ë¦¬
  if (docData.is_trashed !== undefined) {
    if (docData.is_trashed) {
      updateData.trashed_at = new Date().toISOString();
    } else {
      updateData.trashed_at = null;
    }
  }

  const { data, error } = await (supabase as any)
    .from('uslab_exec_docs')
    .update(updateData)
    .eq('id', id)
    .select()
    .single();

  if (error) {
    console.error('Error updating doc:', error);
    return null;
  }

  return data as ExecDoc;
}
```

**ì—…ë°ì´íŠ¸ ë‚´ìš©**:
- `title`: ì œëª©
- `content`: ë³¸ë¬¸ (Tiptap JSON)
- `updated_by`: ìˆ˜ì •ì ID
- `updated_at`: ìë™ ì—…ë°ì´íŠ¸ (DB íŠ¸ë¦¬ê±°)

---

## ğŸ“Š ì €ì¥ íë¦„ ë‹¤ì´ì–´ê·¸ë¨

```
ì‚¬ìš©ì ì…ë ¥
    â†“
ì œëª© ë³€ê²½: handleTitleChange()
ë³¸ë¬¸ ë³€ê²½: handleContentChange()
    â†“
triggerSave(content, title)
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. ê¸°ì¡´ íƒ€ì´ë¨¸ ì·¨ì†Œ          â”‚
â”‚ 2. ì¦‰ì‹œ localStorage ë°±ì—…   â”‚
â”‚ 3. 2ì´ˆ debounce ëŒ€ê¸°         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“ (2ì´ˆ í›„)
performSave(content, title)
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ì˜¤í”„ë¼ì¸?                   â”‚
â”‚ â†’ ë¡œì»¬ ë°±ì—…ë§Œ ìˆ˜í–‰          â”‚
â”‚ â†’ ìƒíƒœ: 'offline'           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“ (ì˜¨ë¼ì¸)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ìƒíƒœ: 'saving'              â”‚
â”‚ PATCH /api/admin/exec-docs/ â”‚
â”‚ [id]                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ì„±ê³µ?                       â”‚
â”‚ â†’ ìƒíƒœ: 'saved'             â”‚
â”‚ â†’ lastSaved ì—…ë°ì´íŠ¸         â”‚
â”‚ â†’ ë¡œì»¬ ë°±ì—… (ìµœì¢…)          â”‚
â”‚                             â”‚
â”‚ ì‹¤íŒ¨?                       â”‚
â”‚ â†’ ìƒíƒœ: 'error'             â”‚
â”‚ â†’ ë¡œì»¬ ë°±ì—… (ìµœì¢…)          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¯ í•µì‹¬ í¬ì¸íŠ¸

### 1. Debounce ì „ëµ
- **2ì´ˆ ëŒ€ê¸°**: ì‚¬ìš©ì ì…ë ¥ ì¤‘ë‹¨ í›„ ì €ì¥
- **íƒ€ì´ë¨¸ ì·¨ì†Œ**: ì—°ì† ì…ë ¥ ì‹œ ì´ì „ íƒ€ì´ë¨¸ ì·¨ì†Œí•˜ì—¬ ë¶ˆí•„ìš”í•œ ìš”ì²­ ë°©ì§€
- **ì¦‰ì‹œ ë¡œì»¬ ë°±ì—…**: ì…ë ¥ ì¦‰ì‹œ localStorageì— ë°±ì—…í•˜ì—¬ ë°ì´í„° ì†ì‹¤ ë°©ì§€

### 2. ì˜¤í”„ë¼ì¸ ì§€ì›
- **ë¡œì»¬ ë°±ì—…**: ì˜¤í”„ë¼ì¸ ì‹œì—ë„ localStorageì— ë°±ì—…
- **ì˜¨ë¼ì¸ ë³µê·€**: ì˜¨ë¼ì¸ ë³µê·€ ì‹œ ìë™ìœ¼ë¡œ ìƒíƒœ ì—…ë°ì´íŠ¸
- **ë³µì› ê¸°ëŠ¥**: í˜ì´ì§€ ë¡œë“œ ì‹œ ë¡œì»¬ ë°±ì—… ë³µì›

### 3. ì €ì¥ ìƒíƒœ ê´€ë¦¬
- **4ê°€ì§€ ìƒíƒœ**: `saved`, `saving`, `error`, `offline`
- **ì‹œê°ì  í”¼ë“œë°±**: ìƒë‹¨ ë°”ì— ì €ì¥ ìƒíƒœ í‘œì‹œ
- **ë§ˆì§€ë§‰ ì €ì¥ ì‹œê°„**: ì €ì¥ ì™„ë£Œ ì‹œ ì‹œê°„ í‘œì‹œ

### 4. ì—ëŸ¬ ì²˜ë¦¬
- **ì €ì¥ ì‹¤íŒ¨ ì‹œ**: ìƒíƒœë¥¼ `error`ë¡œ ë³€ê²½, ë¡œì»¬ ë°±ì—… ìœ ì§€
- **ì¸ì¦ ì‹¤íŒ¨ ì‹œ**: ì—ëŸ¬ ë©”ì‹œì§€ í‘œì‹œ
- **ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜**: ì˜¤í”„ë¼ì¸ ìƒíƒœë¡œ ì²˜ë¦¬

---

## ğŸ”’ ë³´ì•ˆ

### ì¸ì¦
- **Bearer í† í°**: ëª¨ë“  API ìš”ì²­ì— ì¸ì¦ í† í° í¬í•¨
- **ìš´ì˜ì§„ í™•ì¸**: `verifyAdminAuth()`ë¡œ ìš´ì˜ì§„ ê¶Œí•œ í™•ì¸

### ë°ì´í„° ë³´í˜¸
- **ë¡œì»¬ ë°±ì—…**: localStorageì— ì €ì¥ (ë¸Œë¼ìš°ì €ë³„ë¡œ ë¶„ë¦¬)
- **ì„œë²„ ì €ì¥**: Supabase ë°ì´í„°ë² ì´ìŠ¤ì— ì €ì¥
- **ì—…ë°ì´íŠ¸ ì¶”ì **: `updated_by` í•„ë“œë¡œ ìˆ˜ì •ì ì¶”ì 

---

## ğŸ“ ì‚¬ìš©ì ê²½í—˜ (UX)

### Notion ìŠ¤íƒ€ì¼
- **ì €ì¥ ë²„íŠ¼ ì—†ìŒ**: ìë™ ì €ì¥ìœ¼ë¡œ ì‚¬ìš©ì ë¶€ë‹´ ê°ì†Œ
- **ì €ì¥ ìƒíƒœ í‘œì‹œ**: ìƒë‹¨ ë°”ì— ì €ì¥ ìƒíƒœ í‘œì‹œ
- **ë§ˆì§€ë§‰ ì €ì¥ ì‹œê°„**: ì €ì¥ ì™„ë£Œ ì‹œ ì‹œê°„ í‘œì‹œ

### ì˜¤í”„ë¼ì¸ ê²½í—˜
- **ì˜¤í”„ë¼ì¸ í‘œì‹œ**: "ì˜¤í”„ë¼ì¸ - ë™ê¸°í™” ëŒ€ê¸° ì¤‘" ë©”ì‹œì§€
- **ë¡œì»¬ ë°±ì—…**: ì˜¤í”„ë¼ì¸ì—ì„œë„ ê³„ì† í¸ì§‘ ê°€ëŠ¥
- **ìë™ ë™ê¸°í™”**: ì˜¨ë¼ì¸ ë³µê·€ ì‹œ ìë™ìœ¼ë¡œ ì €ì¥

---

## ğŸš€ í–¥í›„ ê°œì„  ì‚¬í•­

1. **ì¶©ëŒ í•´ê²°**
   - ë™ì‹œ í¸ì§‘ ì‹œ ì¶©ëŒ ê°ì§€ ë° í•´ê²°
   - ìµœì‹  ë²„ì „ ìš°ì„  ë˜ëŠ” ì‚¬ìš©ì ì„ íƒ

2. **ë²„ì „ íˆìŠ¤í† ë¦¬**
   - ì €ì¥ ì‹œë§ˆë‹¤ ë²„ì „ ìƒì„±
   - ì´ì „ ë²„ì „ìœ¼ë¡œ ë³µì› ê¸°ëŠ¥

3. **ì‹¤ì‹œê°„ í˜‘ì—…**
   - Yjs/Collab Providerë¡œ ì‹¤ì‹œê°„ ë™ì‹œ í¸ì§‘
   - ë‹¤ë¥¸ ì‚¬ìš©ìì˜ ì»¤ì„œ ìœ„ì¹˜ í‘œì‹œ

4. **ì €ì¥ ìµœì í™”**
   - ë³€ê²½ëœ ë¶€ë¶„ë§Œ ì „ì†¡ (delta ì—…ë°ì´íŠ¸)
   - ì••ì¶• ì „ì†¡

---

## ğŸ“š ì°¸ê³  ìë£Œ

- [Notion ìë™ ì €ì¥](https://www.notion.so/)
- [Debounce íŒ¨í„´](https://lodash.com/docs/4.17.15#debounce)
- [localStorage API](https://developer.mozilla.org/en-US/docs/Web/API/Window/localStorage)

---

**ì‘ì„± ì™„ë£Œ**: 2025-01-16

