지금 상태에서 “노션처럼(슬래시/메뉴/마크다운 붙여넣기 즉시 변환)”이 안 되는 건, **노블(Novel) 쪽 핵심 연결 포인트가 몇 군데 빠져있어서** 그래요. 특히 검토보고서에 적힌 것처럼 **`/` 입력 시 메뉴가 안 뜨고, `EditorCommand` 자체가 DOM에 안 잡히는 상태**가 핵심 증상입니다. 

아래는 **“페이지 코드가 아니라 Novel 컴포넌트 레이어(components/editor/*)에서 동작하도록”** 고쳐 넣는 명세입니다.

---

## 1) 슬래시(`/`) 메뉴가 안 뜨는 1순위 원인 + 수정 명세

### 문제 포인트

현재 너희 `slashCommand` 설정은 아래처럼 **items만 있고, `render: renderItems`가 빠져있음**이 확인됩니다. 
Novel 공식 문서에서는 **반드시** `render: renderItems`를 같이 붙여서 커맨드 팔레트 렌더러가 연결되게 되어 있어요. ([Novel][1])

### 수정 명세 (components/editor/extensions.tsx)

**요구사항**

* `slashCommand`는 `Command.configure({ suggestion: { items, render }})` 형태로 구성한다.
* `render`는 `renderItems`를 사용한다(노블 문서 표준). ([Novel][1])

**구현 스펙 (Cursor에게 그대로 던질 형태)**

* 파일: `components/editor/extensions.tsx`
* 변경:

  1. import 추가

     * `renderItems`를 `"novel/extensions"`에서 import
  2. `slashCommand` 정의 변경

     * `suggestion.render = renderItems` 추가

```ts
// components/editor/extensions.tsx
import { Command, renderItems, createSuggestionItems } from "novel/extensions";

export const suggestionItems = createSuggestionItems([
  // ...기존 아이템들 유지 (command: ({ editor, range }) => { ... })
]);

export const slashCommand = Command.configure({
  suggestion: {
    items: () => suggestionItems,
    render: renderItems,
  },
});
```

### 동작 완료 기준 (Acceptance Criteria)

* 편집기에서 `/` 입력 시 커맨드 팔레트가 뜬다.
* 아이템 클릭 시 해당 블록(heading/list 등)이 삽입/변환된다.
* ESC로 닫힌다.

---

## 2) 키보드 화살표/엔터로 커맨드 메뉴가 “노션처럼” 안 움직이는 문제 (필수 연결)

Novel 문서에서 **`handleCommandNavigation` 연결은 / 커맨드에서 화살표 이동을 고치기 위해 “required”**로 명시돼 있어요. ([Novel][2])
지금 너희 쪽은 이 부분이 주석/미적용인 흔적이 있고(혹은 경로 문제로 빠짐), 그러면 “되긴 하는데 노션같지 않음”이 됩니다. 

### 수정 명세 (BlogEditor 내부의 EditorContent.editorProps)

**요구사항**

* `EditorContent`의 `editorProps.handleDOMEvents.keydown`에서 `handleCommandNavigation(event)`를 호출한다. ([Novel][2])

```ts
import { handleCommandNavigation } from "novel/extensions";

<EditorContent
  editorProps={{
    handleDOMEvents: {
      keydown: (_view, event) => handleCommandNavigation(event),
    },
    attributes: { class: "..." },
  }}
/>
```

### 완료 기준

* `/` 메뉴 열린 상태에서 ↑/↓로 이동 가능
* Enter로 선택 가능

---

## 3) “ChatGPT에서 긁어온 마크다운(## …)”이 붙여넣기 즉시 적용 안 되는 문제

이건 **입력(input rule)**이 아니라 **붙여넣기(paste)** 이슈일 확률이 큽니다.
Tiptap(및 Novel/Tiptap 기반 에디터)은 기본적으로 `##`를 **타이핑 후 스페이스**하면 헤딩으로 변환되는 경우가 많지만, **“붙여넣기”는 별도 옵션/플러그인이 없으면 그냥 텍스트로 들어가는 케이스가 흔해요.**

너희가 쓰는 마크다운 확장이 `tiptap-markdown(aguingand)`라면, 이 문제는 아주 깔끔하게 해결 가능해요:

### (A안) tiptap-markdown을 쓰는 경우: 옵션 하나로 해결

`tiptap-markdown` README에 **`transformPastedText` 옵션이 “붙여넣은 마크다운을 변환”** 용도로 존재합니다(기본 false). ([GitHub][3])

**수정 명세**

* 파일: `components/editor/extensions.tsx`
* 변경:

  * `Markdown.configure({ transformPastedText: true })` 적용

```ts
import { Markdown } from "tiptap-markdown";

export const defaultExtensions = [
  StarterKit.configure(...),
  Markdown.configure({
    transformPastedText: true,   // ✅ 붙여넣기 마크다운 변환
    // transformCopiedText: true, // (원하면) 복사도 마크다운화
  }),
  // ...
];
```

**완료 기준**

* ChatGPT에서 복사한 `## 제목`이 붙여넣기 즉시 Heading 2로 변환된다.
* `- 리스트`도 리스트로 변환된다.

### (B안) tiptap-markdown이 아니라면: PasteMarkdown 확장 추가

만약 공식/다른 마크다운 확장이라 위 옵션이 없다면, Tiptap 문서의 “Paste Markdown Detection” 패턴처럼 **handlePaste에서 “마크다운처럼 보이면 파싱→insertContent”**로 처리해야 합니다. ([tiptap.dev][4])
(이건 Cursor가 코드 작성하기 쉽게 “스펙”만 던지면 됩니다.)

---

## 4) “EditorCommand가 DOM에 아예 없다”를 재발 방지하는 구조 명세

검토보고서에 “`EditorCommand` 관련 DOM 요소 없음”이 찍혀 있어요. 
이 경우는 보통 아래 둘 중 하나입니다:

1. **slashCommand가 렌더러(renderItems)까지 연결 안 되어 EditorCommand가 열릴 트리거 자체가 없음**
   → 위 1번 수정으로 해결되는 경우가 대부분 (가장 유력)

2. **EditorCommand UI를 “노블 컨텍스트 내부”에 렌더하지 않음**
   → EditorCommand UI는 **반드시 `<EditorRoot> ... <EditorContent> ... </EditorContent> ... </EditorRoot>` 트리 안**에 있어야 함(문서 예시도 동일). ([Novel][1])

**권장 명세**

* `components/editor/BlogEditor.tsx`(혹은 공용 Editor 컴포넌트)에서

  * `EditorContent`는 “self-closing”으로 두지 말고(메뉴 렌더링 필요 시),
  * `EditorCommand`/`BubbleMenu`/기타 메뉴를 EditorContent children으로 붙이는 패턴을 표준으로 고정한다. ([Novel][1])

---

## 5) 지금 너희 상태에서 “최소 수정으로 노션급 체감” 만드는 우선순위

1. **slashCommand에 `render: renderItems` 추가** (지금 `/` 메뉴가 안 뜨는 1순위) ([Novel][1])
2. **handleCommandNavigation 연결** (노션처럼 키보드로 메뉴 이동) ([Novel][2])
3. **Markdown 붙여넣기 변환**

   * tiptap-markdown이면 `transformPastedText: true`가 가장 빠르고 견고함 ([GitHub][3])

이 3개가 들어가면 “관리자 계정에서만 노션처럼 편집”이라는 핵심 체감이 거의 완성됩니다.

---

원하면, 너희 현재 `components/editor/extensions.tsx` 기준으로 **“지금 쓰는 Markdown 확장이 tiptap-markdown인지 / @tiptap/markdown인지”**를 전제로 두 가지 버전(A안/B안)으로 **Cursor용 작업지시서(체크리스트+코드패치 단위)**를 더 딱딱하게 정리해서 바로 붙여 넣을 수 있게 만들어줄게요.

[1]: https://novel.sh/docs/guides/tailwind/slash-command "Slash Command - Novel Docs"
[2]: https://novel.sh/docs/guides/tailwind/setup "Setup - Novel Docs"
[3]: https://github.com/aguingand/tiptap-markdown "GitHub - aguingand/tiptap-markdown: The Markdown extension for Tiptap editor."
[4]: https://tiptap.dev/docs/editor/markdown/examples "Markdown Examples | Tiptap Editor Docs"
